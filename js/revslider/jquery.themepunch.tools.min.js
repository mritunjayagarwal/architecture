/* Revolution Slider Tools JavaScript */

(function($) {
    'use strict';
    
    // Revolution Slider Tools
    window.RevSliderTools = {
        
        // Initialize slider
        init: function(slider) {
            this.slider = slider;
            this.currentSlide = 0;
            this.totalSlides = slider.find('.rev-item').length;
            this.isPlaying = true;
            this.autoplayDelay = 5000;
            this.autoplayTimer = null;
            
            this.setupSlides();
            this.setupNavigation();
            this.startAutoplay();
        },
        
        // Setup slides
        setupSlides: function() {
            var self = this;
            var slides = this.slider.find('.rev-item');
            
            slides.each(function(index) {
                $(this).css({
                    'z-index': self.totalSlides - index,
                    'opacity': index === 0 ? 1 : 0
                });
            });
            
            // Add transition effects
            slides.each(function() {
                var transition = $(this).data('transition') || 'crossfade';
                $(this).addClass('transition-' + transition);
            });
        },
        
        // Setup navigation
        setupNavigation: function() {
            var self = this;
            
            // Arrow navigation
            this.slider.find('.tp-leftarrow').on('click', function() {
                self.previousSlide();
            });
            
            this.slider.find('.tp-rightarrow').on('click', function() {
                self.nextSlide();
            });
            
            // Bullet navigation
            this.slider.find('.tp-bullet').on('click', function() {
                var index = $(this).index();
                self.goToSlide(index);
            });
            
            // Thumbnail navigation
            this.slider.find('.tp-thumb').on('click', function() {
                var index = $(this).index();
                self.goToSlide(index);
            });
            
            // Pause on hover
            this.slider.on('mouseenter', function() {
                self.pauseAutoplay();
            }).on('mouseleave', function() {
                self.startAutoplay();
            });
        },
        
        // Go to specific slide
        goToSlide: function(index) {
            if (index < 0 || index >= this.totalSlides) return;
            
            var currentSlide = this.slider.find('.rev-item').eq(this.currentSlide);
            var nextSlide = this.slider.find('.rev-item').eq(index);
            
            this.currentSlide = index;
            
            // Hide current slide
            currentSlide.css('opacity', 0);
            
            // Show next slide
            nextSlide.css('opacity', 1);
            
            // Update navigation
            this.updateNavigation();
            
            // Reset autoplay
            this.resetAutoplay();
        },
        
        // Next slide
        nextSlide: function() {
            var nextIndex = (this.currentSlide + 1) % this.totalSlides;
            this.goToSlide(nextIndex);
        },
        
        // Previous slide
        previousSlide: function() {
            var prevIndex = (this.currentSlide - 1 + this.totalSlides) % this.totalSlides;
            this.goToSlide(prevIndex);
        },
        
        // Update navigation
        updateNavigation: function() {
            // Update bullets
            this.slider.find('.tp-bullet').removeClass('selected');
            this.slider.find('.tp-bullet').eq(this.currentSlide).addClass('selected');
            
            // Update thumbnails
            this.slider.find('.tp-thumb').removeClass('selected');
            this.slider.find('.tp-thumb').eq(this.currentSlide).addClass('selected');
        },
        
        // Start autoplay
        startAutoplay: function() {
            var self = this;
            if (this.isPlaying) {
                this.autoplayTimer = setInterval(function() {
                    self.nextSlide();
                }, this.autoplayDelay);
            }
        },
        
        // Pause autoplay
        pauseAutoplay: function() {
            if (this.autoplayTimer) {
                clearInterval(this.autoplayTimer);
                this.autoplayTimer = null;
            }
        },
        
        // Reset autoplay
        resetAutoplay: function() {
            this.pauseAutoplay();
            this.startAutoplay();
        },
        
        // Play/Pause toggle
        toggleAutoplay: function() {
            this.isPlaying = !this.isPlaying;
            if (this.isPlaying) {
                this.startAutoplay();
            } else {
                this.pauseAutoplay();
            }
        }
    };
    
    // jQuery plugin
    $.fn.revolution = function(options) {
        var defaults = {
            autoplay: true,
            delay: 5000,
            navigation: {
                arrows: true,
                bullets: true,
                thumbs: false
            },
            transition: 'crossfade'
        };
        
        var settings = $.extend({}, defaults, options);
        
        return this.each(function() {
            var slider = $(this);
            
            // Apply settings
            if (settings.autoplay) {
                RevSliderTools.autoplayDelay = settings.delay;
            } else {
                RevSliderTools.isPlaying = false;
            }
            
            // Initialize slider
            RevSliderTools.init(slider);
        });
    };
    
})(jQuery);

